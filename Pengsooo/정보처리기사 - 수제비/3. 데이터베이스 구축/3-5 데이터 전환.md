## Ch.5 데이터 전환

### (1) 데이터 전환 기술

#### 1. 초기 데이터 구축

- 구축 전략 수립

  대량의 데이터를 전환 수행 시 신속하고 안정적인 데이터 전환을 위한 체계적인 초기 데이터 구축 전략을 수립한다.

  |       구축 전략       | 구축 방안                                                   |
  | :-------------------: | ----------------------------------------------------------- |
  |   초기 데이터 구축    | 데이터 결과 분석을 통해 대상의 기본 정보 및 기초자료를 확보 |
  | 데이터 복구 방안 마련 | 기존 데이터 분석을 통한 기초자료 구축방안 제시              |
  |   DB 구축 지침 제시   | 기초 데이터와 대표 값의 비교, DB 구축을 위한 지침서 제시    |

  

- 초기 데이터 구축 대상파악

  초기 데이터 구축을 위한 대상을 식별하고 대상을 목록화한다.

  - 예시. 미세먼지 측정 DB

    |       구축 전략        | 구축 사례                                    |
    | :--------------------: | -------------------------------------------- |
    |   대상지역 기초 현황   | 경기도 면적 및 인구, 경기도 인접 지역 영향도 |
    |     미세먼지 농도      | 미세먼지 농도 수준, 주요 특징                |
    | 미세먼지 저감조치 현황 | 미세먼지 관련 교통통제 빈도, 국가별 협력계획 |



- 초기 데이터 구축 범위 확정

  업무 협의를 통해 초기 데이터 구축 범위를 확정한다.

  | 대상 데이터 | 구축 범위                                                    |
  | :---------: | ------------------------------------------------------------ |
  |  회계 코드  | 계열사 내 회계 코드를 기준으로 영업시스템에 매핑하여 로드    |
  |  계정 코드  | 포탈 내 계정 코드를 기준으로 조직개편 등에 매핑하여 로드     |
  |  예산 코드  | 법인 내 예산 정보를 기준으로 전자결재 시스템에서 예산 정보를 매핑하여 로드 |



- 초기 데이터 구축 시 세부 고려사항
  - 데이터 이관 시 업무 중단을 최소화하고 안정성을 확보할 수 있는 방안을 마련한다.
  - 데이터 이관 정합성 검증을 통해 오류 방지 방안을 제시한다.
  - 이관 완료 후 데이터의 품질 검증을 실시하고 결과를 제시한다.
  - 개인정보에 해당하는 데이터는 암호화하여 적용한다.





#### 2. ETL

**ETL(Extraction, Transformation, Loading)** 은 원천 시스템에서 데이터를 추출(Extraction)하여 변환(Transformation) 작업을 거쳐 목적 시스템으로 적재(Load)하는 프로세스이다.



- ETL 프로세스

  |           수행 단계           | 상세 단계                                                    |            주요 목표             |
  | :---------------------------: | :----------------------------------------------------------- | :------------------------------: |
  | 데이터 전환 계획 및 요건 정의 | 1. 프로젝트 계획<br />2. 프로젝트 환경 구축<br />3. As\-ls 시스템 분석<br />4. To\-Be 시스템 분석<br />5. 데이터 이행 요건 정의 |         데이터 구조 분석         |
  |       데이터 전환 설계        | 1. 논리적 매핑<br />2. 코드 매핑<br />3. 검증규칙 정의<br />4. 이행계획 수립 | Target / Source 매핑 및 검증설계 |
  |       데이터 전환 개발        | 1. 전환 개발 환경 구축<br />2. 전환 프로그램 개발<br />3. 검증 프로그램 개발 |    전환 및 검증 프로그램 개발    |
  |  데이터 전환 테스트 및 검증   | 1. 전환 검증 설계<br />2. 추출 검증<br />3. 변환 결과 검증<br />4. 최종 변환 설계<br />5. N차 이행검증 |    반복 테스트로 정합성 확보     |
  |          데이터 전환          | 1. 최종 전환<br />2. 안정화 지원<br />3. 후속 단계 데이터 전환<br />4. 전환 완료 보고서 작성 |    성공적인 데이터 전환 수행     |





#### 3. 파일 처리 기술

**파일 처리 기술** 은 많은 양의 자료를 각종 매체에 저장하는 기법이다.

- 파일을 하드디스크에 저장 시, 기억공간을 효율적으로 사용하고 자료의 탐색을 쉽게 한다.



- 유형

  - 순차 파일(Sequential File)

    **순차 파일** 은 입력되는 데이터들을 논리적인 순서에 따라 물리적 연속 공간에 순차적으로 기록하는 방식이다.

    - 변동 사항이 크지 않고 기간별로 일괄 처리하는 경우에 적합.
    - 순차 접근이 가능한 자기 테이프에서 사용.
    - 장점
      - 기록 밀도가 높아 기억공간을 효율적으로 사용.
      - 매체 변환이 쉽고 어떤 매체에도 적용 가능, 처리속도 빠름.
    - 단점
      - 파일에 신규 레코드 삽입/삭제 시 파일 전체 복사로 시간소요 큼.
      - 데이터 검색 시 순차 검색으로 인한 검색 효율성 저하.

  - 색인 순차 파일(Indexed Sequential File)

    **색인 순차 파일** 은 레코드들을 키 값 순으로 정렬시켜 기록하고 레코드의 키 항목 색인을 구성하는 방식이다.

    - 순차 처리와 랜덤 처리가 모두 가능.
    - 색인을 이용한 순차적인 접근 방법을 제공하여 ISAM(Index Sequential Access Method)라고도 함.
    - 레코드 참조 시 색인 탐색 후 색인이 가리키는 포인터(주소)를 사용하여 직접 참조.
    - 장점
      - 목적기반 순차 처리, 랜덤 처리 가능.
      - 레코드 삽입, 삭제, 갱신 용이.
    - 단점
      - 색인 구역과 오버플로 구역 구성을 위한 추가 공간 필요.
      - 빈번한 파일 추가 ,삭제 시 효율저하.

  - 직접 파일(Direct File)

    **직접 파일** 은 파일을 구성하는 레코드를 특정 순서 없이 임의의 물리적 저장 공간에 기록하는 파일이다.

    - 랜덤 파일(Random File), DAM(Direct Access Method) 파일이라고도 함.
    - 레코드는 해시 함수에 의해 계산된 물리적 주소를 통해 접근함.
    - 장점
      - 물리적 주소를 통해 각 레코드에 직접 접근하거나 기록 가능.
      - 평균 접근시간 내 접근가능.
    - 단점
      - 레코드 주소 변환 과정 필요로 추가 시간 소요.
      - 별도의 기억공간 확보 필요.
      - 기억공간의 효율 저하 가능성 존재.







### (2) 데이터 전환 수행

#### 1. 데이터 전환 수행 계획

**데이터 전환 수행 계획** 은 데이터 전환을 위한 상세 설계, 전환 및 검증 프로그램 개발과 통합 전환을 수행하는 계획이다.



- 데이터 전환 수행 범위

  데이터 전환 수행 범위는 데이터 전환의 성공/실패의 기준이다.



- 데이터 전환 수행 일정

  데이터 전환 일정은 팀별 업무를 분장하여 팀벽 역할과 납기를 기록한다.



- 데이터 전환 절차
  - 현행(AS\-IS) 시스템에서 목표(TO\-BE) 시스템으로 전환을 위한 단계를 구분한다.
  - 원천 데이터베이스의 데이터는 백업하여 스테이징(Staging) 데이터베이스로 복구한 후 정비 및 변환 작업을 수행한다.
  - 데이터 전환이 완료된 후 검증 단계에서는 스테이징 데이터베이스가 아닌 원천 데이터베이스와 비교하여 데이터 오류를 확인한다.



- 데이터 전환 계획서 작성
  1. 단위 시스템 별 데이터 이행 및 검증 계획
  2. 전체 시스템 데이터 전환 시나리오 작성 및 검증 계획
  3. 최종 데이터 전환 시뮬레이션 검증 계획



- 데이터 전환 수행 단계

  1. 요구사항 분석 단계(전환 계획 및 요건정의)

     - 데이터 전환 프로젝트의 계획을 수립하고 현행 정보시스템 및 원천 데이터의 구조를 분석한다.
     - 현행 정보시스템의 분석이 끝나면 목표 시스템에 대한 분석을 진행한다.

     | 순서 |       프로세스       | 내용                                                         |
     | :--: | :------------------: | ------------------------------------------------------------ |
     |  1   |    프로젝트 계획     | 프로젝트의 목표와 범위를 명확화<br />추친 체계와 절차 및 투입 인력을 명시<br />데이터 품질관리 계획 및 보안 관리 내용 기록 |
     |  2   |  프로젝트 환경 구축  | 프로젝트 수행 위한 PC 및 네트워크 환경 등 개발환경 구축      |
     |  3   |   현행 시스템 분석   | 장비 및 솔루션 현황, 네트워크 구성도 파악<br />원천 데이터 경로 및 크기 분석 |
     |  4   |   목표 시스템 분석   | 데이터가 적재 되는 목표 시스템에 대한 분석<br />데이터베이스 구조를 정확히 분석하고 이해 |
     |  5   | 데이터 전환 요건정의 | 데이터 전환 시 고객과 이해 관계자의 요건을 명확히 정의       |

  2. 설계 단계(전환 설계)

     - 데이터 전환 계획 및 요건정의 단계에서 정의된 내용을 근거로 데이터 전환을 위한 데이터 매핑 및 검증 규칙을 설계한다.

     | 순서 |           프로세스           | 내용                                                         |
     | :--: | :--------------------------: | ------------------------------------------------------------ |
     |  1   | 로지컬 매핑(Logical Mapping) | 목적 데이터베이스 기준으로 원천 데이터의 ETL 로직 및 비즈니스 흐름 반영 |
     |  2   |   코드 매핑(Code Mapping)    | 목적 데이터베이스를 데이터 표준에 맞게 정의                  |
     |  3   |     검증 규칙(Rule) 정의     | 데이터 변환에 의한 전환이 이루어진 경우 검증 규칙을 명확히 정의 |
     |  4   |       전환 설계서 작성       | 데이터 전환 설계 단계에서 정의된 대로 전환 프로그램을 구현   |

  3. 구현 단계(전환 개발)

     - 데이터 전환 설계 단계에서 정의된 대로 데이터 전환 프로그램을 구현한다.

     | 순서 |      프로세스       | 내용                                                         |
     | :--: | :-----------------: | ------------------------------------------------------------ |
     |  1   | 전환 개발 환경 구축 | 개발 표준과 개발방법론에 맞게 데이터 전환 개발 환경을 구축   |
     |  2   | 전환 프로그램 개발  | 데이터 변환 설계서에 따라 데이터 전환 프로그램을 구현        |
     |  3   | 검증 프로그램 개발  | 데이터 검증 설계서의 데이터 검증 논리로 실현 가능한 검증 프로그램을 구현 |

  4. 테스트 단계(전환 테스트 및 검증)

     - 데이터 전환 개발이 완료되면 전환 테스트를 진행하고 계획된 대로 전환되었는지를 검증한다.

     | 순서 |     프로세스     | 내용                                                         |
     | :--: | :--------------: | ------------------------------------------------------------ |
     |  1   |  전환 검증 설계  | 원천 데이터의 추출 및 변환 후 목적 데이터베이스에 전환하기 위한 검증 방법과 단계를 설계 |
     |  2   |    추출 검증     | 원천 데이터베이스, 파일, 문서로부터 전환하기 위한 데이터를 정확히 추출했는지 검증 |
     |  3   |  변환 결과 검증  | 원천 데이터를 목적 데이터베이스에 전환하기 위해 변환 작업에 대한 검증 수행 |
     |  4   |  최종 전환 설계  | 검증 과정에서 발견된 수정 사항을 반영하여 최종 전환 설계를 완성 |
     |  5   | 전환 인프라 구축 | 실제 데이터 전환을 위한 인프라를 구성                        |
     |  6   |  n차 전환 검증   | 반복적인 데이터 전환 테스트로 데이터 정합성 확보             |

  5. 데이터 전환 단계

     데이터 전환 검증이 완료되면 실제 원천시스템의 데이터를 목적시스템에 전환한다.

     | 순서 |       프로세스        | 내용                                                         |
     | :--: | :-------------------: | ------------------------------------------------------------ |
     |  1   |       최종 전환       | 원천 데이터를 목적 데이터베이스에 전환 수행                  |
     |  2   |      안정화 지원      | 전환된 데이터는 신규 시스템 내 운영이상 확인<br />문제 발생 시 즉각적으로 원인 파악 및 대응 |
     |  3   | 후속 단계 데이터 전환 | 안정화 지원 시 발생된 문제점 파악 통해 후속 단계 데이터 전환 진행 |
     |  4   | 전환 완료보고서 작성  | 전환 완료보고서를 작성하고 의사 결정자에게 보고 진행 및 확인 |





#### 2. 체크리스트

**체크리스트(Checklist)** 는 전환 프로그램의 에러, 시간제약, 비즈니스 로직 변경, 긴급 상황 및 위험요인 대응을 위한 측정 가능한 목록이다.



- 체크리스트 작성

  수행 작업의 상세항목, 작업내역, 예정 시각/종료 시간, 작업자를 기재한다.

  - 사전작업
    1. 운영환경 점검
    2. 인프라 상태 점검
    3. 데이터베이스 점검
  - 전환 단계
    1. 테이블 이관 작업
    2. 데이터 정제/변환
  - 점검 단계
    1. 전환 요건항목 검증
    2. SQL 대상 후속조치



#### 3. 데이터 검증

- 데이터 전환 프로그램 검증

  전환 프로그램을 이용한 전환 작업 시 적재 과정의 정상 수행 여부를 점검한다.

  |     작업 구분     | 검증 항목                                                    |
  | :---------------: | ------------------------------------------------------------ |
  | 조직 및 역할 정립 | 데이터 전환을 위한 검증 수행 조직을 확인<br />전환 결과에 대한 개별 역할을 수행 |
  | 유실 데이터 방지  | 유실방지를 위한 대상 식별 및 체크리스트 작성<br />코드 내 오류처리(Error Handler) 구문 작성 |



- 전환 계획서/체크리스트 기반 검증
  - 데이터 전환 계획서의 내용과 체크리스트의 작업 내용을 확인한다.
  - 데이터 검증을 위한 수행 조직을 확인하고, 팀별 검증 역할을 확인한다.
  - 전환 단계별 결과를 확인하고 성과, 시작 시간과 종료 시간 등을 기록한다.



- 데이터 검증 종류

  |     검증 종류     | 검증 내역                                              |
  | :---------------: | ------------------------------------------------------ |
  |     로그 검증     | 전환 시 수행되는 추출/적재 로그를 작성하여 검증        |
  | 애플리케이션 검증 | 응용 애플리케이션을 통한 프로그램 기반 검증            |
  |    데이터 검증    | 사전 정의된 업무 규칙을 통하여 데이터 정합성 검증 수행 |



- 전환 단계별 결과 검증

  |   시점    |              목적              | 방법                                                         |
  | :-------: | :----------------------------: | ------------------------------------------------------------ |
  | 추출 검증 |     원천데이터 정합성 확인     | 전환대상 데이터 등에 대한 검증 보고서 작성<br />작성된 검증 보고서의 정합성은 원본 데이터로 확인 |
  | 전송 검증 |     전송 데이터 유실 확인      | 원천 검증 자료와 비교<br />샘플 레코드로 항목별 정당성 검증<br />원천 데이터 검증 보고서 작성 |
  | 전환 검증 | Staging DB 구성 후 데이터 검증 | 원천 데이터 검증보고서와 Staging DB 간 항목별 검증           |
  | 적재 검증 |     전환데이터 정합성 검증     | 목적 데이터 검증 수행<br />데이터 오류 및 누락, 손실 확인    |
  | 통합 검증 |     매핑 정의서 오류 검증      | 오류 데이터 분석 통해 전환 규칙 오류 수정 및 반영<br />목적 데이터 검증 보고서 작성<br />데이터 추출 결과서 비교 검증 |







### (3) 데이터 정제

#### 1. 데이터 정제

- 데이터 정제 요청서 작성

  전환 시 발생한 오류를 해결하기 위한 데이터 정제 요청 내용을 작성한다.

  |   작성 항목   | 설명                                                      |
  | :-----------: | --------------------------------------------------------- |
  |    정제 ID    | 연월 순번으로 yyyymm\-sss 형태로 작성. sss는 001부터 시작 |
  |   정제 제목   | 정제 요청 내용을 함축적으로 표현할 수 있는 소제목         |
  |  관련 테이블  | 정제 요청 자료와 관련이 있는 테이블                       |
  | 예상 처리건수 | 정제 처리를 해야 하는 자료의 예상 건수                    |



- 데이터 정제 보고서 작성

  - 정제 요청서에 의해 정제된 원천 데이터를 확인하고 검증한다.
  - 정제 결과를 확인 후 정제된 결과를 반영한 정제 보고서를 작성한다.
  - 정제 결과서는 원천 데이터의 오류 데이터 원인과 대응 방안을 함께 작성한다.

  |  대상 항목  | 설명                                         |
  | :---------: | -------------------------------------------- |
  |   정제 ID   | 정제 ID별로 정제 내역을 기록                 |
  |  정제 건수  | 정제 요청건과 비교하여 실제 정제 건수를 기록 |
  |  전환 결과  | 데이터 정제 후 데이터 전환 결과도 함께 기록  |
  | 미처리 사유 | 정제되지 않은 건은 사유와 건수를 함께 기록   |
  |  대응 방안  | 향후 대응 방안을 기록                        |





#### 2. 데이터 품직 분석

- 원천 데이터 품질 분석

  원천 데이터의 품질을 검증함으로써 전환의 정확성을 보장할 수 있다.

  

- 목적 데이터 품질 분석

  원천 데이터와 목적 데이터베이스의 속성 간 대응 관계의 정확한 표현을 위해 데이터 레이아웃을 정확하게 파악하고 품질 검증을 진행해야 한다.



- 데이터 품질 관리

  조직 내/외부의 정보시스템 및 데이터베이스 사용자의 기대를 만족시키기 위한 지속적인 데이터 및 데이터 구조를 개선하기 위한 활동이다.

  - 데이터 품질 요소
    - 데이터 값(Value)
    - 데이터 구조(Data Hierarchy)
    - 관리 프로세스(Data Management Process)





#### 3. 오류 데이터 측정

- 데이터 품질 기준에 따라 정상 데이터와 오류 데이터를 분리한다.

- 정량적 측정을 통해 나온 결과를 토대로 오류 관리 목록에 기재한다.

  | 데이터 구분 | 작업 설명                                                    |
  | :---------: | ------------------------------------------------------------ |
  | 정상 데이터 | 전환 대상 범위의 데이터를 업무 영역별, 테이블별로 세분화<br />정상 데이터의 수량을 정확히 측정 및 기록 |
  | 오류 데이터 | 정합성 기준을 근거로 업무별 오류 위치와 유형을 파악<br />오류 데이터의 수량을 측정하여 오류 관리 목록에 기재 |



- 오류 원인 파악 / 정제 여부 결정

  오류 목록의 심각도, 상태를 참조하여 원천 데이터의 정제 또는 전환 프로그램을 수정할 것인지 데이터 정제 여부를 결정한다.

  - 오류 관리 리스트 내 주요 지표
    - 심각도
      - 상(High): 데이터 이행을 진행할 수 없게 만드는 오류
      - 중(Middle): 데이터 이행 전반에 영향을 미치는 오류
      - 하(Low): 데이터 이행의 영향을 미치지 않는 오류
    - 상태
      - 열린(Open): 오류가 보고되었지만 아직 분석되지 않은 상태
      - 할당된(Assigned): 수정을 위해 오류를 개발자에게 할당한 상태
      - 수정된(Fixed): 개발자가 오류를 수정한 상태
      - 종료된(Closed): 재 테스트 시 오류가 발견되지 않은 상태
      - 연기된(Deferred): 낮은 우선순위로 오류 수정을 연기한 상태
      - 분류된(Classified): 프로젝트 내 오류가 아니라고 판단된 상태